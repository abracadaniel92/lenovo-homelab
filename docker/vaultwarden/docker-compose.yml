services:
  vaultwarden:
    image: vaultwarden/server:latest
    container_name: vaultwarden
    restart: always
    labels:
      - "com.centurylinklabs.watchtower.enable=false"
    ports:
      - "8082:80"
    environment:
      # Admin token for admin panel
      ADMIN_TOKEN: "replace_with_secure_token"
      # Domain for Vaultwarden
      DOMAIN: https://vault.gmojsoski.com
      # Base URL for Rocket
      ROCKET_BASE_URL: https://vault.gmojsoski.com
      # Database URL
      DATABASE_URL: /data/db.sqlite3
      # Enable signups
      SIGNUPS_ALLOWED: "true"
      # Enable invitations
      INVITATIONS_ALLOWED: "true"
      # Web vault enabled
      WEB_VAULT_ENABLED: "true"
      # Log level
      LOG_LEVEL: info
      # Extended logging
      EXTENDED_LOGGING: "true"
      # ROCKET_ADDRESS
      ROCKET_ADDRESS: "0.0.0.0"
      ROCKET_PORT: "80"
      
      # SSO Configuration (Native OIDC)
      SSO_ENABLED: "true"
      SSO_TYPE: "openidconnect"
      SSO_OIDC_CLIENT_ID: "vaultwarden"
      SSO_OIDC_CLIENT_SECRET: "replace_with_client_secret"
      SSO_OIDC_ISSUER: "https://auth.gmojsoski.com"
      SSO_OIDC_REDIRECT_URL: "https://vault.gmojsoski.com/identity/connect/oidc/callback"
      SSO_OIDC_SCOPES: "openid,profile,email"
      
    volumes:
      - ./data:/data
